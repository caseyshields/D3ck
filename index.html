<!DOCTYPE html>
<html>
    <head>
        <title>Shields</title>
        <link rel="stylesheet" type="text/css" href="./index.css">
    </head>
    <body>

        <!-- A CSS trick hero! -->
        <div class="hero">
            <a href="#contacts">
                <span style="display: grid;
                        grid-template-columns: 5em 5em;
                        grid-template-rows: 5em 10em;">
                    <span style="background-color: var( --primary );
                            grid-area: 1 / 1 / 2 / 3;"></span>
                    <span style="background-color: var( --secondary );
                            grid-area: 2 / 1 / 3 / 3;
                            border-bottom-left-radius: 50%;
                            border-bottom-right-radius: 50%;"></span>
                    <span style="background-color: var( --secondary );
                            grid-area: 1 / 1 / 2 / 2;
                            border-bottom-left-radius: 50%;
                            border-bottom-right-radius: 50%;"></span>
                    <span style="background-color: var( --secondary );
                            grid-area: 1 / 2 / 2 / 3;
                            border-bottom-left-radius: 50%;
                            border-bottom-right-radius: 50%;"></span>
                    <span style="background-color: var( --primary );
                            grid-area: 2 / 1 / 3 / 2;
                            border-bottom-left-radius: 100%;"></span>
                    <span style="background-color: var( --primary );
                            grid-area: 2 / 2 / 3 / 3;
                            border-bottom-right-radius: 100%;"></span>
                </span>
            </a>
        </div>

        <!-- contacts bar -->
        <header id="contacts" class="banner">
            <a href="mailto:caseyorigami@gmail.com"> Casey Shields </a>
            <a href="https://github.com/caseyshields/"> Github </a>
            <a href="https://www.pinterest.com/caseyorigami/"> Pinterest </a>
            <a href="https://www.instagram.com/caseyorigami/"> Instagram </a>
        </header>

        <!-- Navigation bar holds filters and sorting options for cards -->
        <nav>
            <!-- <ul>
                <li>
                    <span></span>
                </li>
                <li>
                    <span></span>
                </li>
            </ul> -->
        </nav>

        <!-- Where the site content is displayed -->
        <section class="deck">
            <article class="card">
                <a></a>
                <div></div>
                <ul>
                    <li></li><li></li><li></li>
                </ul>
            </article>
            <article class="card">
                <a></a>
                <div></div>
                <ul>
                    <li></li><li></li><li></li>
                </ul>
            </article>
            <article class="card">
                <a></a>
                <div></div>
                <ul>
                    <li></li><li></li><li></li>
                </ul>
            </article>
            <article class="card">
                <a></a>
                <div></div>
                <ul>
                    <li></li><li></li><li></li>
                </ul>
            </article>
            <!-- these are removable placeholders that matches the markup the card component generates -->
        </section>

        <!-- For displaying links in a dismissable modal. -->
        <section class="modal">
            <iframe
                src=""
                scrolling="yes"
                frameborder="0">
            </iframe>
            <button">
                close
            </button>
        </section>

        <!-- copyright and disclaimers -->
        <footer class="banner">
            <sub>Made with <a href="">D3CK</a></sub>
            <sub>2020</sub>
        </footer>
        
        <script src="https://d3js.org/d3.v5.js" charset="utf-8"></script>
        <script src="./content.js" charset="utf-8"></script>
        <script type="module">
            import D3ck from './deck/d3ck.js';
            import Card from './deck/card.js';
            import Frame from './deck/frame.js';

            let Window = document.defaultView

            let content = getContent();
            console.log(content);

            let deck = D3ck();
            deck.dispatch.on('preview', console.log);
            deck.dispatch.on('navigate', console.log);

            let section = d3.select('.deck');
            let cards = Card(deck, section);
            cards(content);

            let frame = Frame(d3.select('.modal'));
            frame({});
            frame.show('https://caseyshields.github.io/trie/');

            // this shadow effect might be eye-bleeding. it is also neat.
            section.on('mousemove', function(item, index, selection) {
                let height = 50;
                let screen = d3.mouse(this);
                let bounds = [Window.outerWidth, Window.outerHeight];
                let offset = [Math.floor(height*(0.5-(screen[0]/bounds[0]))),
                                Math.floor(height*(0.5-(screen[1]/bounds[1]))) ];
                // console.log(screen, bounds);
                // TODO actually handle the angles correctly!
                // TODO shadows should always be below content!

                section.selectAll('article.card')
                    .style('box-shadow', function(d) {
                        return `${offset[0]}px ${offset[1]}px 25px 5px rgba(0.0,0.0,0.0,0.1)`;
                    });
                //console.log( {item, index, selection} );

            });
        </script>
    </body>
</html>